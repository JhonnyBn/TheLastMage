{"version":3,"sources":["../../../../../src/main/server/actions/game/specialattack.js"],"names":["SpecialAttack","nextAction","prototype","processCommand","helpMsg","game","input","running","sender","sendMsgToCurrentClient","param","playerName","undefined","targetName","target","getPlayerByName","player","isTheTurnOfThePlayer","currentPlayer","specialAttacksLeft","sendMsgToAll","name","specialAttack","specialDamage","checkLife","setNextPlayer","alive","DefaultAction"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;IAEqBA,a;;;;;AAEjB,yBAAYC,UAAZ,EAAwB;AAAA;;AAAA;AACpB,yHAAMA,UAAN,EAAkB,eAAlB,EAAmCD,aAAa,CAACE,SAAd,CAAwBC,cAA3D;AACA,UAAKC,OAAL,GAAe,4EAAf;AAFoB;AAGvB;;;;mCAEcC,I,EAAMC,K,EAAO;AAExB,UAAID,IAAI,CAACE,OAAL,IAAgB,CAApB,EAAuB;AACnBF,QAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CAAmC,sBAAnC;AACA;AACH;;AALuB,qIAMUH,KANV;AAAA,UAMhBI,KANgB,aAMhBA,KANgB;;AAOxB,UAAMC,UAAU,GAAGD,KAAK,CAAC,CAAD,CAAxB;;AACA,UAAIC,UAAU,IAAIC,SAAlB,EAA6B;AACzBP,QAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CAAmC,mCAAnC;AACA;AACH;;AACD,UAAMI,UAAU,GAAGH,KAAK,CAAC,CAAD,CAAxB;;AACA,UAAIG,UAAU,IAAID,SAAlB,EAA6B;AACzBP,QAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CAAmC,mCAAnC;AACA;AACH;;AACD,UAAMK,MAAM,GAAGT,IAAI,CAACU,eAAL,CAAqBF,UAArB,CAAf;;AACA,UAAIC,MAAM,IAAIF,SAAd,EAAyB;AACrBP,QAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CAAmC,6BAAnC;AACA;AACH;;AACD,UAAMO,MAAM,GAAGX,IAAI,CAACU,eAAL,CAAqBJ,UAArB,CAAf;;AACA,UAAIK,MAAM,IAAIJ,SAAd,EAAyB;AACrBP,QAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CAAmC,6BAAnC;AACA;AACH;;AAED,UAAIJ,IAAI,CAACY,oBAAL,CAA0BN,UAA1B,CAAJ,EAA2C;AAEvC,YAAIN,IAAI,CAACa,aAAL,CAAmBC,kBAAnB,GAAwC,CAA5C,EAA+C;AAC3Cd,UAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CAAmC,+CAAnC;AACA;AACH;;AAEDJ,QAAAA,IAAI,CAACG,MAAL,CAAYY,YAAZ,CACIJ,MAAM,CAACK,IAAP,GAAc,8BAAd,GAA+CP,MAAM,CAACO,IAAtD,GAA6D,KADjE;;AAIA,YAAIL,MAAM,CAACM,aAAP,CAAqBR,MAArB,CAAJ,EAAkC;AAC9BT,UAAAA,IAAI,CAACG,MAAL,CAAYY,YAAZ,CACI,oBAAoBJ,MAAM,CAACO,aAA3B,GAA2C,UAD/C;AAGAT,UAAAA,MAAM,CAACU,SAAP;AACH,SALD,MAMK;AACDnB,UAAAA,IAAI,CAACG,MAAL,CAAYY,YAAZ,CAAyB,6CAAzB;AACH;;AACDf,QAAAA,IAAI,CAACoB,aAAL;AACH,OArBD,MAqBO;AACH,YAAI,CAACT,MAAM,CAACU,KAAZ,EAAmB;AACfrB,UAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CACI,uEADJ;AAGH,SAJD,MAIO;AACHJ,UAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CACI,yEADJ;AAGH;;AACD;AACH;AACJ;;;EApEsCkB,8B","sourcesContent":["import DefaultAction from \"../actionDefaultClass\"\r\n\r\nexport default class SpecialAttack extends DefaultAction {\r\n\r\n    constructor(nextAction) {\r\n        super(nextAction, \"specialattack\", SpecialAttack.prototype.processCommand)\r\n        this.helpMsg = \"specialattack [TargetPlayerName] -> To use special attack on other player.\"\r\n    }\r\n\r\n    processCommand(game, input) {\r\n\r\n        if (game.running == 0) {\r\n            game.sender.sendMsgToCurrentClient(\"Game is not running.\")\r\n            return;\r\n        }\r\n        const { param } = super.openInput(input)\r\n        const playerName = param[0];\r\n        if (playerName == undefined) {\r\n            game.sender.sendMsgToCurrentClient(\"Please inform a playerNameOrigin.\")\r\n            return;\r\n        }\r\n        const targetName = param[1];\r\n        if (targetName == undefined) {\r\n            game.sender.sendMsgToCurrentClient(\"Please inform a playerNameTarget.\")\r\n            return;\r\n        }\r\n        const target = game.getPlayerByName(targetName)\r\n        if (target == undefined) {\r\n            game.sender.sendMsgToCurrentClient(\"PlayerNameTarget not found.\")\r\n            return;\r\n        }\r\n        const player = game.getPlayerByName(playerName)\r\n        if (player == undefined) {\r\n            game.sender.sendMsgToCurrentClient(\"playerNameOrigin not found.\")\r\n            return;\r\n        }\r\n\r\n        if (game.isTheTurnOfThePlayer(playerName)) {\r\n\r\n            if (game.currentPlayer.specialAttacksLeft < 1) {\r\n                game.sender.sendMsgToCurrentClient(\"You can't use more special attacks this game.\")\r\n                return;\r\n            }\r\n\r\n            game.sender.sendMsgToAll(\r\n                player.name + \" is using special attack on \" + target.name + \"...\"\r\n            );\r\n\r\n            if (player.specialAttack(target)) {\r\n                game.sender.sendMsgToAll(\r\n                    \"Success! Dealt \" + player.specialDamage + \" damage.\"\r\n                );\r\n                target.checkLife();\r\n            }\r\n            else {\r\n                game.sender.sendMsgToAll(\"Fail! He or she blocked the special attack.\");\r\n            }\r\n            game.setNextPlayer();\r\n        } else {\r\n            if (!player.alive) {\r\n                game.sender.sendMsgToCurrentClient(\r\n                    \"You are dead. Please wait for the game to finish or start a new game.\"\r\n                );\r\n            } else {\r\n                game.sender.sendMsgToCurrentClient(\r\n                    'Please wait for your turn, or type \"help\" for the commands information.'\r\n                );\r\n            }\r\n            return;\r\n        }\r\n    }\r\n}"],"file":"specialattack.js"}