{"version":3,"sources":["../../../../../src/main/server/actions/game/attack.js"],"names":["Attack","nextAction","prototype","processCommand","helpMsg","game","input","running","sender","sendMsgToCurrentClient","param","playerName","undefined","targetName","target","getPlayerByName","player","console","log","isTheTurnOfThePlayer","sendMsgToAll","attack","attackDamage","checkLife","setNextPlayer","alive","DefaultAction"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;IAEqBA,M;;;;;AAEjB,kBAAYC,UAAZ,EAAwB;AAAA;;AAAA;AACpB,kHAAMA,UAAN,EAAkB,QAAlB,EAA4BD,MAAM,CAACE,SAAP,CAAiBC,cAA7C;AACA,UAAKC,OAAL,GAAe,sDAAf;AAFoB;AAGvB;;;;mCAEcC,I,EAAMC,K,EAAO;AAExB,UAAID,IAAI,CAACE,OAAL,IAAgB,CAApB,EAAuB;AACnBF,QAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CAAmC,sBAAnC;AACA;AACH;;AALuB,8HAMUH,KANV;AAAA,UAMhBI,KANgB,aAMhBA,KANgB;;AAOxB,UAAMC,UAAU,GAAGD,KAAK,CAAC,CAAD,CAAxB;;AACA,UAAIC,UAAU,IAAIC,SAAlB,EAA6B;AACzBP,QAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CAAmC,mCAAnC;AACA;AACH;;AACD,UAAMI,UAAU,GAAGH,KAAK,CAAC,CAAD,CAAxB;;AACA,UAAIG,UAAU,IAAID,SAAlB,EAA6B;AACzBP,QAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CAAmC,mCAAnC;AACA;AACH;;AACD,UAAMK,MAAM,GAAGT,IAAI,CAACU,eAAL,CAAqBF,UAArB,CAAf;;AACA,UAAIC,MAAM,IAAIF,SAAd,EAAyB;AACrBP,QAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CAAmC,6BAAnC;AACA;AACH;;AACD,UAAMO,MAAM,GAAGX,IAAI,CAACU,eAAL,CAAqBJ,UAArB,CAAf;;AACA,UAAIK,MAAM,IAAIJ,SAAd,EAAyB;AACrBP,QAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CAAmC,6BAAnC;AACA;AACH;;AACDQ,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AAEA,UAAIX,IAAI,CAACc,oBAAL,CAA0BR,UAA1B,CAAJ,EAA2C;AAEvCN,QAAAA,IAAI,CAACG,MAAL,CAAYY,YAAZ,CACIT,UAAU,GAAG,gBAAb,GAAgCE,UAAhC,GAA6C,KADjD;AAGAI,QAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,YAAIA,MAAM,CAACK,MAAP,CAAcP,MAAd,CAAJ,EAA2B;AACvBT,UAAAA,IAAI,CAACG,MAAL,CAAYY,YAAZ,CACI,oBAAoBJ,MAAM,CAACM,YAA3B,GAA0C,UAD9C;AAGAR,UAAAA,MAAM,CAACS,SAAP;AACH,SALD,MAKO;AACHlB,UAAAA,IAAI,CAACG,MAAL,CAAYY,YAAZ,CAAyB,qCAAzB;AACH;;AACDf,QAAAA,IAAI,CAACmB,aAAL;AACH,OAfD,MAeO;AACH,YAAI,CAACR,MAAM,CAACS,KAAZ,EAAmB;AACfpB,UAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CACI,uEADJ;AAGH,SAJD,MAIO;AACHJ,UAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CACI,yEADJ;AAGH;;AACD;AACH;AACJ;;;EA/D+BiB,8B","sourcesContent":["import DefaultAction from \"../actionDefaultClass\"\r\n\r\nexport default class Attack extends DefaultAction {\r\n\r\n    constructor(nextAction) {\r\n        super(nextAction, \"attack\", Attack.prototype.processCommand)\r\n        this.helpMsg = \"attack [TargetPlayerName] -> To attack other player.\"\r\n    }\r\n\r\n    processCommand(game, input) {\r\n\r\n        if (game.running == 0) {\r\n            game.sender.sendMsgToCurrentClient(\"Game is not running.\")\r\n            return;\r\n        }\r\n        const { param } = super.openInput(input)\r\n        const playerName = param[0];\r\n        if (playerName == undefined) {\r\n            game.sender.sendMsgToCurrentClient(\"Please inform a playerNameOrigin.\")\r\n            return;\r\n        }\r\n        const targetName = param[1];\r\n        if (targetName == undefined) {\r\n            game.sender.sendMsgToCurrentClient(\"Please inform a playerNameTarget.\")\r\n            return;\r\n        }\r\n        const target = game.getPlayerByName(targetName)\r\n        if (target == undefined) {\r\n            game.sender.sendMsgToCurrentClient(\"PlayerNameTarget not found.\")\r\n            return;\r\n        }\r\n        const player = game.getPlayerByName(playerName)\r\n        if (player == undefined) {\r\n            game.sender.sendMsgToCurrentClient(\"playerNameOrigin not found.\")\r\n            return;\r\n        }\r\n        console.log(player)\r\n\r\n        if (game.isTheTurnOfThePlayer(playerName)) {\r\n\r\n            game.sender.sendMsgToAll(\r\n                playerName + \" is attacking \" + targetName + \"...\"\r\n            );\r\n            console.log(player)\r\n            if (player.attack(target)) {\r\n                game.sender.sendMsgToAll(\r\n                    \"Success! Dealt \" + player.attackDamage + \" damage.\"\r\n                );\r\n                target.checkLife();\r\n            } else {\r\n                game.sender.sendMsgToAll(\"Fail! He or she blocked the attack.\");\r\n            }\r\n            game.setNextPlayer();\r\n        } else {\r\n            if (!player.alive) {\r\n                game.sender.sendMsgToCurrentClient(\r\n                    \"You are dead. Please wait for the game to finish or start a new game.\"\r\n                );\r\n            } else {\r\n                game.sender.sendMsgToCurrentClient(\r\n                    'Please wait for your turn, or type \"help\" for the commands information.'\r\n                );\r\n            }\r\n            return;\r\n        }\r\n    }\r\n}"],"file":"attack.js"}