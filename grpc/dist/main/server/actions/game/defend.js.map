{"version":3,"sources":["../../../../../src/main/server/actions/game/defend.js"],"names":["Defend","nextAction","prototype","processCommand","helpMsg","game","input","running","sender","sendMsgToCurrentClient","param","playerName","undefined","player","getPlayerByName","isTheTurnOfThePlayer","defend","setNextPlayer","sendMsgToAllButIgnoreCurrentClient","name","alive","DefaultAction"],"mappings":";;;;;;;;;;;;;;;;;;;;;AACA;;IAEqBA,M;;;;;AAEjB,kBAAYC,UAAZ,EAAwB;AAAA;;AAAA;AACpB,kHAAMA,UAAN,EAAkB,QAAlB,EAA4BD,MAAM,CAACE,SAAP,CAAiBC,cAA7C;AACA,UAAKC,OAAL,GAAe,yCAAf;AAFoB;AAGvB;;;;mCAEcC,I,EAAMC,K,EAAO;AAExB,UAAID,IAAI,CAACE,OAAL,IAAgB,CAApB,EAAuB;AACnBF,QAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CAAmC,sBAAnC;AACA;AACH;;AALuB,8HAMUH,KANV;AAAA,UAMhBI,KANgB,aAMhBA,KANgB;;AAOxB,UAAMC,UAAU,GAAGD,KAAK,CAAC,CAAD,CAAxB;;AACA,UAAIC,UAAU,IAAIC,SAAlB,EAA6B;AACzBP,QAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CAAmC,mCAAnC;AACA;AACH;;AACD,UAAMI,MAAM,GAAGR,IAAI,CAACS,eAAL,CAAqBH,UAArB,CAAf;;AACA,UAAIE,MAAM,IAAID,SAAd,EAAyB;AACrBP,QAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CAAmC,6BAAnC;AACA;AACH;;AAED,UAAIJ,IAAI,CAACU,oBAAL,CAA0BJ,UAA1B,CAAJ,EAA2C;AAEvCE,QAAAA,MAAM,CAACG,MAAP;AACAX,QAAAA,IAAI,CAACY,aAAL;AACAZ,QAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CAAmC,4BAAnC;AACAJ,QAAAA,IAAI,CAACG,MAAL,CAAYU,kCAAZ,CAA+CL,MAAM,CAACM,IAAP,GAAc,gCAA7D;AACH,OAND,MAMO;AACH,YAAI,CAACN,MAAM,CAACO,KAAZ,EAAmB;AACff,UAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CACI,uEADJ;AAGH,SAJD,MAIO;AACHJ,UAAAA,IAAI,CAACG,MAAL,CAAYC,sBAAZ,CACI,yEADJ;AAGH;;AACD;AACH;AACJ;;;EA3C+BY,8B","sourcesContent":["\r\nimport DefaultAction from \"../actionDefaultClass\"\r\n\r\nexport default class Defend extends DefaultAction {\r\n\r\n    constructor(nextAction) {\r\n        super(nextAction, \"defend\", Defend.prototype.processCommand)\r\n        this.helpMsg = \"defend -> To defend yourself this turn.\"\r\n    }\r\n\r\n    processCommand(game, input) {\r\n\r\n        if (game.running == 0) {\r\n            game.sender.sendMsgToCurrentClient(\"Game is not running.\")\r\n            return;\r\n        }\r\n        const { param } = super.openInput(input)\r\n        const playerName = param[0];\r\n        if (playerName == undefined) {\r\n            game.sender.sendMsgToCurrentClient(\"Please inform a playerNameOrigin.\")\r\n            return;\r\n        }\r\n        const player = game.getPlayerByName(playerName)\r\n        if (player == undefined) {\r\n            game.sender.sendMsgToCurrentClient(\"playerNameOrigin not found.\")\r\n            return;\r\n        }\r\n\r\n        if (game.isTheTurnOfThePlayer(playerName)) {\r\n\r\n            player.defend();\r\n            game.setNextPlayer();\r\n            game.sender.sendMsgToCurrentClient(\"Defending until next turn.\");\r\n            game.sender.sendMsgToAllButIgnoreCurrentClient(player.name + \" is defending until next turn.\");\r\n        } else {\r\n            if (!player.alive) {\r\n                game.sender.sendMsgToCurrentClient(\r\n                    \"You are dead. Please wait for the game to finish or start a new game.\"\r\n                );\r\n            } else {\r\n                game.sender.sendMsgToCurrentClient(\r\n                    'Please wait for your turn, or type \"help\" for the commands information.'\r\n                );\r\n            }\r\n            return;\r\n        }\r\n    }\r\n}\r\n\r\n"],"file":"defend.js"}