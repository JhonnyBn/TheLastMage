{"version":3,"sources":["../../../src/main/client/client.js"],"names":["rl","readline","createInterface","input","process","stdin","output","stdout","proto","grpc","loadPackageDefinition","protoLoader","loadSync","keepCase","longs","String","enums","defaults","oneofs","REMOTE_SERVER","username","client","game","Actions","credentials","createInsecure","startChat","channel","join","user","on","onData","text","send","res","message","console","log","question","answer"],"mappings":";;;;AAAA;;AACA;;AACA;;AAEA;AACA,IAAIA,EAAE,GAAGC,QAAQ,CAACC,eAAT,CAAyB;AAC9BC,EAAAA,KAAK,EAAEC,OAAO,CAACC,KADe;AAE9BC,EAAAA,MAAM,EAAEF,OAAO,CAACG;AAFc,CAAzB,CAAT,C,CAKA;;AACA,IAAIC,KAAK,GAAGC,IAAI,CAACC,qBAAL,CACRC,WAAW,CAACC,QAAZ,CAAqB,mBAArB,EAA0C;AACtCC,EAAAA,QAAQ,EAAE,IAD4B;AAEtCC,EAAAA,KAAK,EAAEC,MAF+B;AAGtCC,EAAAA,KAAK,EAAED,MAH+B;AAItCE,EAAAA,QAAQ,EAAE,IAJ4B;AAKtCC,EAAAA,MAAM,EAAE;AAL8B,CAA1C,CADQ,CAAZ;AAUA,IAAMC,aAAa,GAAG,cAAtB;AAEA,IAAIC,QAAJ,C,CAEA;;AACA,IAAIC,MAAM,GAAG,IAAIb,KAAK,CAACc,IAAN,CAAWC,OAAf,CACTJ,aADS,EAETV,IAAI,CAACe,WAAL,CAAiBC,cAAjB,EAFS,CAAb,C,CAKA;;AACA,SAASC,SAAT,GAAqB;AACjB,MAAIC,OAAO,GAAGN,MAAM,CAACO,IAAP,CAAY;AAAEC,IAAAA,IAAI,EAAET;AAAR,GAAZ,CAAd;AAEAO,EAAAA,OAAO,CAACG,EAAR,CAAW,MAAX,EAAmBC,MAAnB;AAEA/B,EAAAA,EAAE,CAAC8B,EAAH,CAAM,MAAN,EAAc,UAAUE,IAAV,EAAgB;AAC1BX,IAAAA,MAAM,CAACY,IAAP,CAAY;AAAEJ,MAAAA,IAAI,EAAET,QAAR;AAAkBY,MAAAA,IAAI,EAAEA;AAAxB,KAAZ,EAA4C,UAAAE,GAAG,EAAI,CAAG,CAAtD;AACH,GAFD;AAGH,C,CAED;;;AACA,SAASH,MAAT,CAAgBI,OAAhB,EAAyB;AACrBC,EAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACAC,EAAAA,OAAO,CAACC,GAAR,WAAeF,OAAO,CAACN,IAAvB,eAAgCM,OAAO,CAACH,IAAxC;AACH,C,CAED;;;AACAhC,EAAE,CAACsC,QAAH,CAAY,kBAAZ,EAAgC,UAAAC,MAAM,EAAI;AACtCnB,EAAAA,QAAQ,GAAGmB,MAAX;AAEAb,EAAAA,SAAS;AACZ,CAJD","sourcesContent":["import * as protoLoader from '@grpc/proto-loader';\r\nimport * as grpc from 'grpc';\r\nimport * as readline from 'readline'\r\n\r\n//Read terminal Lines\r\nvar rl = readline.createInterface({\r\n    input: process.stdin,\r\n    output: process.stdout\r\n});\r\n\r\n//Load the protobuf\r\nvar proto = grpc.loadPackageDefinition(\r\n    protoLoader.loadSync(\"protos/game.proto\", {\r\n        keepCase: true,\r\n        longs: String,\r\n        enums: String,\r\n        defaults: true,\r\n        oneofs: true\r\n    })\r\n);\r\n\r\nconst REMOTE_SERVER = \"0.0.0.0:5001\";\r\n\r\nlet username;\r\n\r\n//Create gRPC client\r\nlet client = new proto.game.Actions(\r\n    REMOTE_SERVER,\r\n    grpc.credentials.createInsecure()\r\n);\r\n\r\n//Start the stream between server and client\r\nfunction startChat() {\r\n    let channel = client.join({ user: username });\r\n\r\n    channel.on(\"data\", onData);\r\n\r\n    rl.on(\"line\", function (text) {\r\n        client.send({ user: username, text: text }, res => { });\r\n    });\r\n}\r\n\r\n//When server send a message\r\nfunction onData(message) {\r\n    console.log(message)\r\n    console.log(`${message.user}: ${message.text}`);\r\n}\r\n\r\n//Ask user name then start the chat\r\nrl.question(\"What's ur name? \", answer => {\r\n    username = answer;\r\n\r\n    startChat();\r\n});"],"file":"client.js"}